<!DOCTYPE html>
<html lang="en">
<head>
  <script src="./node_modules/nexmo-client/dist/nexmoClient.js"></script>
</head>
<body>

  <h1>Inbound PSTN phone call</h1>
  <p id="notification">Lines are open for calls...</p>
  <br />
  <button type="button" id="answer">Answer</button>
  <button type="button" id="reject">Reject</button>
  <button type="button" id="hangup">Hang Up</button>
  <script>

    const AGENT_JWT = "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE2MDIwODQxMTgsImp0aSI6ImQ3ODBmMDcwLTA4YjAtMTFlYi05MTliLTA3NDZiOWI1NTBhOCIsImV4cCI6MTYwMjEwNTcxNywiYWNsIjp7InBhdGhzIjp7Ii8qL3VzZXJzLyoqIjp7fSwiLyovY29udmVyc2F0aW9ucy8qKiI6e30sIi8qL3Nlc3Npb25zLyoqIjp7fSwiLyovZGV2aWNlcy8qKiI6e30sIi8qL2ltYWdlLyoqIjp7fSwiLyovbWVkaWEvKioiOnt9LCIvKi9hcHBsaWNhdGlvbnMvKioiOnt9LCIvKi9wdXNoLyoqIjp7fSwiLyova25vY2tpbmcvKioiOnt9fX0sInN1YiI6IkFsaWNlIiwiYXBwbGljYXRpb25faWQiOiJiYjBmYzViMi0wOTJmLTQxYmUtYjkyMi04YjdiYThkMDg1NzcifQ.DHxfrxXes9SaeG26fJADdKeaL9jtLe4DFokDhFEggVT49cwnPjWpTGcYodY5_AZGa41ufHdXKiAOxN3DVYV1bsHoR3tiFHQ8gomF8CzJjBPWMwpHfreqHQ6PU48_GtZgz4AAb2NCLbrlFLRZXXLbnyjWWlGxCqeLWKPcwsdHCQxAsfeE9DFDJXrNZaztnQ3OqG6u3FW4jVIo57znrF05LLVni6a2wg-7_JqFILo-m9LYleMLQCzPOqNEv2ER8M1Olx9ZhtAplVvOB3nUg1897WuO4kUqCc3Gp6WwKhI0T2wBTrjoVsBsrJvYMPyz-5kmOW-ERwzwF5HuxfibIDVSog"; 

    new NexmoClient({ debug: true })
    .login(AGENT_JWT)
    .then(app => {

        const answerBtn = document.getElementById("answer");
        const rejectBtn = document.getElementById("reject");
        const hangupBtn = document.getElementById("hangup");
        const notification = document.getElementById("notification");

        app.on("member:call", (member, call) => {
            notification.textContent = "You are receiving a call";
            // Answer the call.
            answerBtn.addEventListener('click', () => {
                call.answer();
                notification.textContent = "You are in a call";
            });
            // Reject the call
            rejectBtn.addEventListener("click", () => {
                call.reject();
                notification.textContent = `You rejected the call`;
            });
            // Hang-up the call
            hangupBtn.addEventListener("click", () => {
                call.hangUp();
                notification.textContent = `You ended the call`;
            });
        });

        app.on("call:status:changed", (call) => {
          notification.textContent = "Call Status: " + call.status;
        });
    })
    .catch(console.error);
  </script>
</body>
</html>
